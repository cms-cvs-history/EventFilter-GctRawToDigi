
process gctRawToDigi = {

#  include "FWCore/MessageLogger/data/MessageLogger.cfi"
  service = MessageLogger {
    untracked vstring destinations = { "debug.log" }
    untracked PSet debug.log = { untracked string threshold = "DEBUG" } #    untracked vstring debugModules =  { "DumpFEDRawDataProduct", "TextToRaw", "GctRawToDigi"}
  }

  source = NewEventStreamFileReader {
    untracked vstring fileNames = {
      'file:globalJuly.00014746.0001.A.storageManager.0.0000.dat'
    }
  }

#  source = PoolSource { 
#    untracked vstring fileNames = { 
#       'file:gctRaw.root'
#     }
#  }

  module dumpRaw = DumpFEDRawDataProduct { 
    untracked vint32 feds = { 745 }
    untracked bool dumpPayload = true
  }

  untracked PSet maxEvents = { untracked int32 input = 1000 }

  include "EventFilter/GctRawToDigi/data/l1GctHwDigis.cfi"
  replace l1GctHwDigis.inputLabel = source

  path p = { dumpRaw, l1GctHwDigis }


  module outputEvents = PoolOutputModule {
    untracked vstring outputCommands = {
      "keep *"
#      "keep *_l1GctHwDigis_*_*"
#      "keep *_gctDigiToRaw_*_*"
    }
    untracked string fileName = "gctDigis.root"
  }

  endpath outpath = { outputEvents }

}
